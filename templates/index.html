<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Crop RecommendationðŸŒ±</title>
    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet" />

    <style>
      :root{
        --leaf:#10b981;         /* emerald */
        --leaf-600:#059669;
        --sky:#e0f2fe;          /* light sky */
        --ink:#0f172a;          /* slate-900 */
        --muted:#64748b;        /* slate-500 */
        --bg:#f8fafc;           /* slate-50 */
      }

      body{background: linear-gradient(135deg, #f3f4f6 0%, #eef2ff 100%);}  

      /* Navbar */
      .navbar-brand{
        font-weight: 800;
        letter-spacing: .3px;
      }
      .nav-link{font-weight: 600;}

      /* Hero */
      .hero{
        background: radial-gradient(1400px 500px at 10% -10%, rgba(16,185,129,.15), transparent),
                    radial-gradient(1000px 400px at 110% -20%, rgba(59,130,246,.12), transparent);
      }

      /* Card (glass) */
      .glass{
        background: rgba(255,255,255,.75);
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
        border: 1px solid rgba(255,255,255,.6);
        box-shadow: 0 10px 30px rgba(2,8,23,.08);
      }

      .form-label{font-weight: 600; color: var(--ink);}  
      .form-text{color: var(--muted);}  

      .unit-addon{
        min-width: 3.2rem; 
        justify-content: center; 
        font-weight: 700; 
        color: var(--leaf-600);
        background: #ecfdf5;
        border-color: #d1fae5;
      }

      .btn-primary{
        background: var(--leaf);
        border-color: var(--leaf);
        font-weight: 700;
      }
      .btn-primary:hover{background: var(--leaf-600); border-color: var(--leaf-600);}  

      .badge-soft{
        background: #ecfdf5;
        color: var(--leaf-600);
        border: 1px solid #d1fae5;
      }

      footer{
        color: #475569;
      }
    </style>
  </head>

  <body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top shadow-sm">
      <div class="container">
        <a class="navbar-brand d-flex align-items-center" href="/">
          <i class="bi bi-flower3 me-2"></i>
          Crop Recommendation
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
            <li class="nav-item"><a class="nav-link active" href="#">Home</a></li>
            <li class="nav-item"><a class="nav-link" href="#contact">Contact</a></li>
            <li class="nav-item"><a class="nav-link disabled" aria-disabled="true">About</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Hero -->
    <header class="hero py-5 py-lg-6">
      <div class="container">
        <div class="row align-items-center g-4">
          <div class="col-lg-7">
            <span class="badge badge-soft rounded-pill px-3 py-2 mb-3">
              <i class="bi bi-stars me-2"></i> Smart Farming Assistant
            </span>
            <h1 class="display-5 fw-bold text-dark mb-3">
              Get the best <span class="text-success">crop</span> for your soil & weather
            </h1>
            <p class="lead text-secondary mb-0">
              Enter your soil nutrients and local conditions. Weâ€™ll recommend the most suitable cropâ€”fast, simple, and data-driven.
            </p>
          </div>
          <div class="col-lg-5">
            <div class="card glass border-0 rounded-4 p-4 p-lg-4">
              <div class="card-body p-0">
                <h2 class="h4 fw-bold mb-3"><i class="bi bi-clipboard2-pulse me-2"></i>Input Parameters</h2>
                <form action="/predict" method="POST" id="cropForm" novalidate>
                  <div class="row g-3">
                    <div class="col-md-4">
                      <label for="Nitrogen" class="form-label">Nitrogen (N)</label>
                      <div class="input-group">
                        <input type="number" id="Nitrogen" name="Nitrogen" class="form-control" placeholder="e.g., 90" min="0" step="1" required />
                        <span class="input-group-text unit-addon">ppm</span>
                      </div>
                      <div class="form-text">Available Nitrogen in soil.</div>
                    </div>
                    <div class="col-md-4">
                      <label for="Phosporus" class="form-label">Phosphorus (P)</label>
                      <div class="input-group">
                        <input type="number" id="Phosporus" name="Phosporus" class="form-control" placeholder="e.g., 42" min="0" step="1" required />
                        <span class="input-group-text unit-addon">ppm</span>
                      </div>
                      <div class="form-text">Available Phosphorus in soil.</div>
                    </div>
                    <div class="col-md-4">
                      <label for="Potassium" class="form-label">Potassium (K)</label>
                      <div class="input-group">
                        <input type="number" id="Potassium" name="Potassium" class="form-control" placeholder="e.g., 20" min="0" step="1" required />
                        <span class="input-group-text unit-addon">ppm</span>
                      </div>
                      <div class="form-text">Available Potassium in soil.</div>
                    </div>

                    <div class="col-md-6">
                      <label for="Temperature" class="form-label">Temperature</label>
                      <div class="input-group">
                        <input type="number" id="Temperature" name="Temperature" class="form-control" placeholder="e.g., 24.5" step="0.01" required />
                        <span class="input-group-text unit-addon">Â°C</span>
                      </div>
                    </div>
                    <div class="col-md-6">
                      <label for="Humidity" class="form-label">Humidity</label>
                      <div class="input-group">
                        <input type="number" id="Humidity" name="Humidity" class="form-control" placeholder="e.g., 80" step="0.01" min="0" max="100" required />
                        <span class="input-group-text unit-addon">%</span>
                      </div>
                    </div>

                    <div class="col-md-6">
                      <label for="Ph" class="form-label">pH</label>
                      <div class="input-group">
                        <input type="number" id="Ph" name="Ph" class="form-control" placeholder="e.g., 6.5" step="0.01" min="0" max="14" required />
                        <span class="input-group-text unit-addon">pH</span>
                      </div>
                    </div>
                    <div class="col-md-6">
                      <label for="Rainfall" class="form-label">Rainfall</label>
                      <div class="input-group">
                        <input type="number" id="Rainfall" name="Rainfall" class="form-control" placeholder="e.g., 120.5" step="0.01" min="0" required />
                        <span class="input-group-text unit-addon">mm</span>
                      </div>
                    </div>

                    <div class="col-12 d-grid mt-2">
                      <button type="submit" class="btn btn-primary btn-lg" id="submitBtn">
                        <span class="btn-text"><i class="bi bi-magic me-2"></i>Get Recommendation</span>
                        <span class="spinner-border spinner-border-sm d-none" role="status" aria-hidden="true" id="loadingSpinner"></span>
                      </button>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </header>

    <!-- Result Card (Jinja conditional) -->
    <div class="container my-5">
      {% if result %}
      <div class="row justify-content-center">
        <div class="col-md-8 col-lg-7">
          <div class="card border-0 rounded-4 shadow-sm overflow-hidden">
            <div class="row g-0 align-items-center">
              <div class="col-md-5">
              </div>
              <div class="col-md-7">
                <div class="card-body p-4">
                  <h5 class="card-title h4 mb-2"><i class="bi bi-patch-check-fill text-success me-2"></i>Recommended Crop</h5>
                  <p class="card-text fs-5 mb-3 text-secondary">Based on your inputs, you should consider cultivating:</p>
                  <div class="alert alert-success mb-0 fw-bold fs-5">
                    {{ result }}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      {% endif %}
    </div>

    <!-- Footer -->
    <footer class="border-top py-4 mt-auto">
      <div class="container d-flex flex-column flex-md-row justify-content-between align-items-center gap-3">
        <div class="small">Â© <span id="year"></span> Crop Recommendation Â· All rights reserved</div>
        <div class="d-flex align-items-center gap-3 small">
          <span class="text-muted">Made with</span>
          <i class="bi bi-heart-fill text-danger"></i>
          <span class="text-muted">for smarter farming</span>
        </div>
      </div>
    </footer>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      // Current year in footer
      document.getElementById('year').textContent = new Date().getFullYear();

      // Simple submit loading state
      const form = document.getElementById('cropForm');
      const submitBtn = document.getElementById('submitBtn');
      const spinner = document.getElementById('loadingSpinner');
      const btnText = submitBtn.querySelector('.btn-text');

      form?.addEventListener('submit', function(){
        submitBtn.disabled = true;
        spinner.classList.remove('d-none');
        btnText.textContent = 'Analyzing...';
      });

      // Basic client-side validation styling
      (() => {
        'use strict'
        const forms = document.querySelectorAll('.needs-validation')
        Array.from(forms).forEach(form => {
          form.addEventListener('submit', event => {
            if (!form.checkValidity()) {
              event.preventDefault()
              event.stopPropagation()
            }
            form.classList.add('was-validated')
          }, false)
        })
      })()
    </script>
  </body>
</html>
